import{r as j}from"./rolldown-runtime-CjiBMUN4.js";import{Cn as A,_t as x,bt as m,ft as M,mt as L,vt as T,xt as E}from"./vendor-BM98ZQOm.js";import"./vendor-charts-C1uJw4t_.js";import{s as P}from"./vendor-react-BH1SDbH3.js";import"./vendor-utils-BBFcn-gs.js";import{$r as n,At as q,Fr as W,Gr as B,H as F,Kn as g,Kr as I,U as O,Yr as D,Zr as H,ai as t,ci as $,jr as z,oi as V,qr as G,si as K,vi as R}from"./vendor-mui-B1q6pdKu.js";import{_t as U,gt as N,ht as Y,mt as f,n as b,t as Z,xt as o}from"./index-Bv4sL6jZ.js";var J=j(A()),e=j(R()),Q=L().shape({email:x().email("Email khÃ´ng há»£p lá»‡").required("Email lÃ  báº¯t buá»™c"),password:x().min(6,"Máº­t kháº©u pháº£i cÃ³ Ã­t nháº¥t 6 kÃ½ tá»±").required("Máº­t kháº©u lÃ  báº¯t buá»™c"),rememberMe:T().default(!1)});function ne(){const y=P(),i=Z(),a=b(U),u=b(N),[l,v]=(0,J.useState)(!1),{control:c,handleSubmit:_,formState:{errors:s}}=E({resolver:M(Q),defaultValues:{email:"",password:"",rememberMe:!1}}),k=async r=>{try{i(f());const d={email:r.email,password:r.password},S=await i(Y(d)).unwrap();console.log("âœ… Login successful:",S),r.rememberMe?(o.setString("rememberMe","true"),o.setString("rememberedEmail",r.email)):(o.remove("rememberMe"),o.remove("rememberedEmail"));const h=o.has("access_token");if(console.log("ğŸ”‘ Has token in localStorage:",h),!h){console.error("âŒ Token not saved to localStorage!");return}await new Promise(C=>setTimeout(C,150));const p=y.state?.from?.pathname||"/dashboard";console.log("ğŸ”€ Navigating to:",p),window.location.href=p}catch(d){console.error("âŒ Login failed:",d)}},w=()=>{v(!l)};return(0,e.jsx)(n,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:2},children:(0,e.jsxs)(B,{maxWidth:"sm",children:[(0,e.jsx)(D,{elevation:10,sx:{borderRadius:2},children:(0,e.jsxs)(G,{sx:{p:4},children:[(0,e.jsxs)(n,{sx:{textAlign:"center",mb:4},children:[(0,e.jsx)(t,{variant:"h4",component:"h1",fontWeight:"bold",color:"primary",gutterBottom:!0,children:"PortLink Orchestrator"}),(0,e.jsx)(t,{variant:"body2",color:"text.secondary",children:"Há»‡ thá»‘ng quáº£n lÃ½ cáº£ng thÃ´ng minh"})]}),u&&(0,e.jsx)(V,{severity:"error",sx:{mb:3},onClose:()=>i(f()),children:u}),(0,e.jsx)("form",{onSubmit:_(k),children:(0,e.jsxs)(n,{sx:{display:"flex",flexDirection:"column",gap:2.5},children:[(0,e.jsx)(m,{name:"email",control:c,render:({field:r})=>(0,e.jsx)(g,{...r,label:"Email",type:"email",fullWidth:!0,error:!!s.email,helperText:s.email?.message,disabled:a,autoComplete:"email",autoFocus:!0,placeholder:"admin@portlink.com"})}),(0,e.jsx)(m,{name:"password",control:c,render:({field:r})=>(0,e.jsx)(g,{...r,label:"Máº­t kháº©u",type:l?"text":"password",fullWidth:!0,error:!!s.password,helperText:s.password?.message,disabled:a,autoComplete:"current-password",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",InputProps:{endAdornment:(0,e.jsx)(z,{position:"end",children:(0,e.jsx)(K,{"aria-label":"toggle password visibility",onClick:w,edge:"end",disabled:a,children:l?(0,e.jsx)(F,{}):(0,e.jsx)(O,{})})})}})}),(0,e.jsx)(m,{name:"rememberMe",control:c,render:({field:r})=>(0,e.jsx)(W,{control:(0,e.jsx)(I,{...r,checked:r.value,disabled:a}),label:"Ghi nhá»› Ä‘Äƒng nháº­p"})}),(0,e.jsx)(H,{type:"submit",variant:"contained",size:"large",fullWidth:!0,disabled:a,startIcon:a?(0,e.jsx)($,{size:20}):(0,e.jsx)(q,{}),sx:{mt:1,py:1.5,textTransform:"none",fontSize:"1rem",fontWeight:600},children:a?"Äang Ä‘Äƒng nháº­p...":"ÄÄƒng nháº­p"})]})}),(0,e.jsxs)(n,{sx:{mt:4,p:2,bgcolor:"grey.50",borderRadius:1},children:[(0,e.jsx)(t,{variant:"caption",color:"text.secondary",display:"block",gutterBottom:!0,children:(0,e.jsx)("strong",{children:"TÃ i khoáº£n test:"})}),(0,e.jsx)(t,{variant:"caption",color:"text.secondary",display:"block",children:"â€¢ Admin: admin@catlai.com / Admin@2025"}),(0,e.jsx)(t,{variant:"caption",color:"text.secondary",display:"block",children:"â€¢ Manager: manager@catlai.com / Manager@2025"}),(0,e.jsx)(t,{variant:"caption",color:"text.secondary",display:"block",children:"â€¢ Operations: operations@catlai.com / Operations@2025"}),(0,e.jsx)(t,{variant:"caption",color:"text.secondary",display:"block",children:"â€¢ Driver: driver@catlai.com / Driver@2025"})]})]})}),(0,e.jsx)(t,{variant:"body2",color:"white",textAlign:"center",sx:{mt:3},children:"Â© 2025 PortLink Orchestrator. All rights reserved."})]})})}export{ne as default};
