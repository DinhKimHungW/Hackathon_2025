import{r as se}from"./rolldown-runtime-CjiBMUN4.js";import{Cn as me,_t as I,bt as b,gt as ne,mt as H,pt as xe,t as he,xt as pe}from"./vendor-BM98ZQOm.js";import"./vendor-charts-C1uJw4t_.js";import{r as fe}from"./vendor-utils-BBFcn-gs.js";import{$r as r,Dr as K,Fn as je,Fr as O,Gr as ye,Ir as ge,Kn as T,Mn as Se,Mr as v,Nr as be,Pn as ve,Pt as Ce,Sr as X,U as De,V as $,X as te,Y as ae,Yr as ie,Zr as B,_r as Te,ai as n,ar as Ae,br as V,ci as _e,ct as J,d as Ie,fi as N,kr as Ee,ln as we,lt as U,mt as Ne,n as Me,oi as g,or as ke,qr as re,ri as M,si as Q,sr as Re,t as Le,tn as oe,vi as Pe,vn as Be,vr as q,wr as Z}from"./vendor-mui-B1q6pdKu.js";import{C as He,S as ze,T as _,_ as We,b as Ve,d as Fe,f as ee,g as Oe,h as $e,m as Y,n as A,p as Ue,t as le,u as qe,v as Ye,w as f,x as G,y as Ge}from"./index-Bv4sL6jZ.js";var ce=se(me()),e=se(Pe()),P=H({name:I().required("Simulation name is required").min(3).max(100),scenarioType:I().oneOf(Object.values(f)).required()}),Ke=H({shipDelayConfig:H({shipVisitId:I().required("Ship visit is required"),delayHours:ne().required().min(1).max(48),reason:I()}).required()}),Xe=H({assetMaintenanceConfig:H({assetId:I().required("Asset is required"),maintenanceStart:I().required("Start time is required"),maintenanceDuration:ne().required().min(1).max(24),notes:I()}).required()});function Ze({onSubmit:s,loading:a,baseScheduleId:o,shipVisits:x=[],assets:p=[]}){const[d,m]=(0,ce.useState)(0),{control:c,handleSubmit:C,watch:u,formState:{errors:h},getValues:D,setError:S,clearErrors:y}=pe({defaultValues:{name:"",scenarioType:f.SHIP_DELAY,shipDelayConfig:{shipVisitId:"",delayHours:3,reason:""},assetMaintenanceConfig:{assetId:"",maintenanceStart:new Date().toISOString(),maintenanceDuration:2,notes:""},customChanges:[]}}),l=u("scenarioType"),k=["Select Scenario","Configure Details","Review & Run"],R=(i=d,t=l)=>i===0?P:i===1?t===f.SHIP_DELAY?Ke.concat(P):t===f.ASSET_MAINTENANCE?Xe.concat(P):P:P,E=i=>{i instanceof xe&&(y(),i.inner.forEach(t=>{t.path&&S(t.path,{type:"manual",message:t.message})}))},z=async()=>{try{await R().validate(D(),{abortEarly:!1}),y(),m(i=>i+1)}catch(i){E(i)}},W=()=>{y(),m(i=>i-1)},L=async i=>{try{await R(1,i.scenarioType).validate(i,{abortEarly:!1}),y()}catch(j){E(j);return}const t={name:i.name,baseScheduleId:o,scenarioType:i.scenarioType,changes:[]};i.scenarioType===f.SHIP_DELAY&&i.shipDelayConfig?t.changes=[{entityType:"ship_visit",entityId:i.shipDelayConfig.shipVisitId,field:"etaActual",oldValue:"0",newValue:i.shipDelayConfig.delayHours}]:i.scenarioType===f.ASSET_MAINTENANCE&&i.assetMaintenanceConfig?t.changes=[{entityType:"asset",entityId:i.assetMaintenanceConfig.assetId,field:"maintenanceWindow",oldValue:null,newValue:{maintenanceStart:i.assetMaintenanceConfig.maintenanceStart,maintenanceDuration:i.assetMaintenanceConfig.maintenanceDuration}}]:i.customChanges&&(t.changes=i.customChanges),s(t)},ue=i=>{switch(i){case 0:return(0,e.jsxs)(r,{sx:{display:"flex",flexDirection:"column",gap:3},children:[(0,e.jsx)(b,{name:"name",control:c,render:({field:t})=>(0,e.jsx)(T,{...t,label:"Simulation Name *",fullWidth:!0,error:!!h.name,helperText:h.name?.message,placeholder:"e.g., Ship A Delay 3 Hours"})}),(0,e.jsxs)(ge,{component:"fieldset",children:[(0,e.jsx)(be,{component:"legend",children:"Scenario Type *"}),(0,e.jsx)(b,{name:"scenarioType",control:c,render:({field:t})=>(0,e.jsxs)(Te,{...t,children:[(0,e.jsx)(O,{value:f.SHIP_DELAY,control:(0,e.jsx)(q,{}),label:(0,e.jsxs)(r,{children:[(0,e.jsx)(n,{variant:"subtitle2",children:"Ship Delay"}),(0,e.jsx)(n,{variant:"caption",color:"text.secondary",children:"Simulate a ship arrival delay and its impact on schedule"})]})}),(0,e.jsx)(O,{value:f.ASSET_MAINTENANCE,control:(0,e.jsx)(q,{}),label:(0,e.jsxs)(r,{children:[(0,e.jsx)(n,{variant:"subtitle2",children:"Asset Maintenance"}),(0,e.jsx)(n,{variant:"caption",color:"text.secondary",children:"Schedule maintenance window for berth or crane"})]})}),(0,e.jsx)(O,{value:f.CUSTOM,control:(0,e.jsx)(q,{}),label:(0,e.jsxs)(r,{children:[(0,e.jsx)(n,{variant:"subtitle2",children:"Custom Scenario"}),(0,e.jsx)(n,{variant:"caption",color:"text.secondary",children:"Advanced: Define custom changes to tasks or assets"})]}),disabled:!0})]})})]})]});case 1:return l===f.SHIP_DELAY?(0,e.jsxs)(r,{sx:{display:"flex",flexDirection:"column",gap:3},children:[(0,e.jsx)(n,{variant:"h6",children:"Ship Delay Configuration"}),(0,e.jsx)(b,{name:"shipDelayConfig.shipVisitId",control:c,render:({field:t})=>(0,e.jsxs)(T,{...t,select:!0,label:"Select Ship *",fullWidth:!0,error:!!h.shipDelayConfig?.shipVisitId,helperText:h.shipDelayConfig?.shipVisitId?.message,children:[x.length===0&&(0,e.jsx)(V,{disabled:!0,value:"",children:"No ship visits available"}),x.map(j=>(0,e.jsx)(V,{value:j.id,children:j.shipName},j.id))]})}),(0,e.jsx)(b,{name:"shipDelayConfig.delayHours",control:c,render:({field:t})=>(0,e.jsx)(T,{...t,type:"number",label:"Delay (hours) *",fullWidth:!0,inputProps:{min:1,max:48,step:.5},error:!!h.shipDelayConfig?.delayHours,helperText:h.shipDelayConfig?.delayHours?.message||"Range: 1-48 hours"})}),(0,e.jsx)(b,{name:"shipDelayConfig.reason",control:c,render:({field:t})=>(0,e.jsx)(T,{...t,label:"Reason (optional)",fullWidth:!0,multiline:!0,rows:2,placeholder:"e.g., Bad weather, technical issue"})})]}):l===f.ASSET_MAINTENANCE?(0,e.jsx)(Ie,{dateAdapter:Le,children:(0,e.jsxs)(r,{sx:{display:"flex",flexDirection:"column",gap:3},children:[(0,e.jsx)(n,{variant:"h6",children:"Asset Maintenance Configuration"}),(0,e.jsx)(b,{name:"assetMaintenanceConfig.assetId",control:c,render:({field:t})=>(0,e.jsxs)(T,{...t,select:!0,label:"Select Asset *",fullWidth:!0,error:!!h.assetMaintenanceConfig?.assetId,helperText:h.assetMaintenanceConfig?.assetId?.message,children:[p.length===0&&(0,e.jsx)(V,{disabled:!0,value:"",children:"No assets available"}),p.map(j=>(0,e.jsxs)(V,{value:j.id,children:[j.name," (",j.type,")"]},j.id))]})}),(0,e.jsx)(b,{name:"assetMaintenanceConfig.maintenanceStart",control:c,render:({field:t})=>(0,e.jsx)(Me,{label:"Maintenance Start *",value:t.value?new Date(t.value):null,onChange:j=>t.onChange(j?.toISOString()),slotProps:{textField:{fullWidth:!0,error:!!h.assetMaintenanceConfig?.maintenanceStart,helperText:h.assetMaintenanceConfig?.maintenanceStart?.message}}})}),(0,e.jsx)(b,{name:"assetMaintenanceConfig.maintenanceDuration",control:c,render:({field:t})=>(0,e.jsx)(T,{...t,type:"number",label:"Duration (hours) *",fullWidth:!0,inputProps:{min:1,max:24,step:.5},error:!!h.assetMaintenanceConfig?.maintenanceDuration,helperText:h.assetMaintenanceConfig?.maintenanceDuration?.message||"Range: 1-24 hours"})}),(0,e.jsx)(b,{name:"assetMaintenanceConfig.notes",control:c,render:({field:t})=>(0,e.jsx)(T,{...t,label:"Notes (optional)",fullWidth:!0,multiline:!0,rows:2,placeholder:"e.g., Scheduled maintenance, repair work"})})]})}):(0,e.jsx)(g,{severity:"info",children:"Custom scenario configuration is coming soon. Please select Ship Delay or Asset Maintenance."});case 2:return(0,e.jsxs)(r,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,e.jsx)(n,{variant:"h6",children:"Review Simulation"}),(0,e.jsxs)(N,{variant:"outlined",sx:{p:2},children:[(0,e.jsx)(n,{variant:"subtitle2",color:"text.secondary",children:"Simulation Name"}),(0,e.jsx)(n,{variant:"body1",gutterBottom:!0,children:u("name")}),(0,e.jsx)(n,{variant:"subtitle2",color:"text.secondary",sx:{mt:2},children:"Scenario Type"}),(0,e.jsx)(n,{variant:"body1",gutterBottom:!0,children:He[l]}),l===f.SHIP_DELAY&&u("shipDelayConfig")&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n,{variant:"subtitle2",color:"text.secondary",sx:{mt:2},children:"Configuration"}),(0,e.jsxs)(n,{variant:"body2",children:["â€¢ Ship: ",x.find(t=>t.id===u("shipDelayConfig.shipVisitId"))?.shipName]}),(0,e.jsxs)(n,{variant:"body2",children:["â€¢ Delay: ",u("shipDelayConfig.delayHours")," hours"]}),u("shipDelayConfig.reason")&&(0,e.jsxs)(n,{variant:"body2",children:["â€¢ Reason: ",u("shipDelayConfig.reason")]})]}),l===f.ASSET_MAINTENANCE&&u("assetMaintenanceConfig")&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n,{variant:"subtitle2",color:"text.secondary",sx:{mt:2},children:"Configuration"}),(0,e.jsxs)(n,{variant:"body2",children:["â€¢ Asset: ",p.find(t=>t.id===u("assetMaintenanceConfig.assetId"))?.name]}),(0,e.jsxs)(n,{variant:"body2",children:["â€¢ Start: ",new Date(u("assetMaintenanceConfig.maintenanceStart")||"").toLocaleString()]}),(0,e.jsxs)(n,{variant:"body2",children:["â€¢ Duration: ",u("assetMaintenanceConfig.maintenanceDuration")," hours"]})]})]}),(0,e.jsx)(g,{severity:"warning",children:"This simulation will create a copy of the active schedule and apply the scenario changes. The original schedule will not be modified."})]});default:return null}};return(0,e.jsxs)(r,{sx:{width:"100%"},children:[(0,e.jsx)(Ae,{activeStep:d,sx:{mb:4},children:k.map(i=>(0,e.jsx)(Re,{children:(0,e.jsx)(ke,{children:i})},i))}),(0,e.jsx)(r,{sx:{minHeight:300,mb:3},children:ue(d)}),(0,e.jsxs)(r,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,e.jsx)(B,{disabled:d===0||a,onClick:W,startIcon:(0,e.jsx)(je,{}),children:"Back"}),(0,e.jsx)(r,{sx:{display:"flex",gap:1},children:d<k.length-1?(0,e.jsx)(B,{variant:"contained",onClick:z,endIcon:(0,e.jsx)(ve,{}),disabled:a,children:"Next"}):(0,e.jsx)(B,{variant:"contained",color:"primary",onClick:C(L),startIcon:a?(0,e.jsx)(_e,{size:20}):(0,e.jsx)(Ne,{}),disabled:a,children:a?"Running...":"Run Simulation"})})]})]})}var de=s=>s.split(/[_\s]/).filter(Boolean).map(a=>a.charAt(0).toUpperCase()+a.slice(1).toLowerCase()).join(" "),w=(s,a=0)=>typeof s=="number"&&Number.isFinite(s)?s:a,F=({label:s,valueBefore:a,valueAfter:o,suffix:x="",icon:p})=>{const d=o-a,m=d>0,c=d!==0;return(0,e.jsx)(ie,{variant:"outlined",children:(0,e.jsxs)(re,{children:[(0,e.jsxs)(r,{sx:{display:"flex",alignItems:"center",mb:1},children:[p,(0,e.jsx)(n,{variant:"subtitle2",sx:{ml:1},children:s})]}),(0,e.jsxs)(r,{sx:{display:"flex",alignItems:"baseline",gap:1},children:[(0,e.jsxs)(n,{variant:"h6",color:"text.secondary",children:[a,x]}),(0,e.jsx)(n,{variant:"body2",color:"text.secondary",children:"->"}),(0,e.jsxs)(n,{variant:"h5",color:c?m?"error.main":"success.main":"text.primary",children:[o,x]})]}),c&&(0,e.jsxs)(r,{sx:{display:"flex",alignItems:"center",mt:1},children:[m?(0,e.jsx)(ae,{color:"error",fontSize:"small"}):(0,e.jsx)(te,{color:"success",fontSize:"small"}),(0,e.jsxs)(n,{variant:"caption",color:m?"error.main":"success.main",sx:{ml:.5},children:[m?"+":"",d,x," ",m?"increase":"decrease"]})]})]})})},Je=({conflict:s})=>{const a=s?.severity??"LOW",o=ze[a]??"#9e9e9e",x=c=>{switch(c){case"CRITICAL":return(0,e.jsx)(oe,{color:"error"});case"HIGH":return(0,e.jsx)($,{color:"error"});case"MEDIUM":return(0,e.jsx)($,{color:"warning"});default:return(0,e.jsx)($,{color:"info"})}},p=de(s?.type??"Unknown"),d=s?.description??"No description provided.",m=Array.isArray(s?.affectedTasks)&&s.affectedTasks.length>0?s.affectedTasks.join(", "):"None";return(0,e.jsx)(Z,{sx:{border:1,borderColor:"divider",borderRadius:1,mb:1,bgcolor:"background.paper"},children:(0,e.jsx)(X,{primary:(0,e.jsxs)(r,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[x(a),(0,e.jsx)(n,{variant:"subtitle1",component:"span",children:p}),(0,e.jsx)(M,{label:a,size:"small",sx:{bgcolor:o,color:"white",fontWeight:600}})]}),secondary:(0,e.jsxs)(r,{children:[(0,e.jsx)(n,{variant:"body2",color:"text.secondary",sx:{mb:1},children:d}),(0,e.jsxs)(n,{variant:"caption",color:"text.secondary",children:["Affected Tasks: ",m]})]})})})},Qe=({recommendation:s})=>{const a=de(s?.type??"Recommendation"),o=s?.description??"No additional details provided.",x=s?.estimatedImpact??"N/A",p=typeof s?.confidence=="number"&&s.confidence>0?`${s.confidence}% confidence`:null;return(0,e.jsx)(Z,{sx:{border:1,borderColor:"divider",borderRadius:1,mb:1,bgcolor:"background.paper"},children:(0,e.jsx)(X,{primary:(0,e.jsxs)(r,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[(0,e.jsx)(Ce,{color:"primary"}),(0,e.jsx)(n,{variant:"subtitle1",component:"span",children:a}),p&&(0,e.jsx)(M,{label:p,size:"small",variant:"outlined"})]}),secondary:(0,e.jsxs)(r,{children:[(0,e.jsx)(n,{variant:"body2",sx:{mb:1},children:o}),(0,e.jsxs)(n,{variant:"caption",color:"success.main",children:["Impact: ",x]})]})})})};function es({result:s,onApply:a,onDiscard:o,applying:x=!1}){const p=s?.status??_.PENDING,d={totalTasks:w(s?.metrics?.totalTasks),affectedTasks:w(s?.metrics?.affectedTasks),totalDelayHours:w(s?.metrics?.totalDelayHours),resourceUtilizationBefore:w(s?.metrics?.resourceUtilizationBefore),resourceUtilizationAfter:w(s?.metrics?.resourceUtilizationAfter)},m=Array.isArray(s?.conflicts)?s.conflicts:[],c=Array.isArray(s?.recommendations)?s.recommendations:[],C=w(s?.executionTimeMs),u=typeof s?.conflictsDetected=="number"?s.conflictsDetected:m.length,h=C>5e3,D=(()=>{switch(p){case _.COMPLETED:return{icon:(0,e.jsx)(Be,{}),color:"success",label:"Completed"};case _.FAILED:return{icon:(0,e.jsx)(oe,{}),color:"error",label:"Failed"};case _.RUNNING:return{icon:(0,e.jsx)(U,{}),color:"info",label:"Running"};default:return{icon:(0,e.jsx)(U,{}),color:"default",label:"Pending"}}})();return(0,e.jsxs)(r,{children:[(0,e.jsxs)(r,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[(0,e.jsxs)(r,{children:[(0,e.jsx)(n,{variant:"h5",gutterBottom:!0,children:"Simulation Results"}),(0,e.jsxs)(r,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,e.jsx)(M,{icon:D.icon,label:D.label,color:D.color}),(0,e.jsxs)(n,{variant:"caption",color:"text.secondary",children:["Execution time: ",C,"ms",h&&" (> 5s)"]})]})]}),(0,e.jsxs)(r,{sx:{display:"flex",gap:1},children:[(0,e.jsx)(B,{variant:"outlined",onClick:o,disabled:x,children:"Discard"}),(0,e.jsx)(B,{variant:"contained",color:"primary",onClick:a,disabled:x,children:x?"Applying...":"Apply Simulation"})]})]}),h&&(0,e.jsx)(g,{severity:"warning",sx:{mb:3},children:(0,e.jsxs)(n,{variant:"body2",children:["Simulation took longer than expected (",C,"ms). Consider optimizing the scenario or reducing the schedule size."]})}),(0,e.jsxs)(N,{sx:{p:3,mb:3},children:[(0,e.jsx)(n,{variant:"h6",gutterBottom:!0,children:"Metrics Comparison"}),(0,e.jsxs)(v,{container:!0,spacing:2,sx:{mt:1},children:[(0,e.jsx)(v,{item:!0,xs:12,sm:6,md:3,children:(0,e.jsx)(F,{label:"Total Tasks",valueBefore:d.totalTasks,valueAfter:d.totalTasks,icon:(0,e.jsx)(Se,{color:"action"})})}),(0,e.jsx)(v,{item:!0,xs:12,sm:6,md:3,children:(0,e.jsx)(F,{label:"Affected Tasks",valueBefore:0,valueAfter:d.affectedTasks,icon:(0,e.jsx)(U,{color:"warning"})})}),(0,e.jsx)(v,{item:!0,xs:12,sm:6,md:3,children:(0,e.jsx)(F,{label:"Total Delay",valueBefore:0,valueAfter:d.totalDelayHours,suffix:"h",icon:(0,e.jsx)(ae,{color:"error"})})}),(0,e.jsx)(v,{item:!0,xs:12,sm:6,md:3,children:(0,e.jsx)(F,{label:"Resource Utilization",valueBefore:d.resourceUtilizationBefore,valueAfter:d.resourceUtilizationAfter,suffix:"%",icon:(0,e.jsx)(te,{color:"success"})})})]})]}),(0,e.jsxs)(N,{sx:{p:3,mb:3},children:[(0,e.jsxs)(r,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[(0,e.jsx)(n,{variant:"h6",children:"Conflicts Detected"}),(0,e.jsx)(M,{label:`${u} conflict${u===1?"":"s"}`,color:u>0?"error":"success",size:"small"})]}),u===0?(0,e.jsx)(g,{severity:"success",children:"No conflicts detected! The simulation schedule is conflict-free."}):(0,e.jsx)(K,{sx:{p:0},children:m.map((S,y)=>(0,e.jsx)(Je,{conflict:S},S.id??`conflict-${y}`))})]}),(0,e.jsxs)(N,{sx:{p:3},children:[(0,e.jsxs)(r,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[(0,e.jsx)(n,{variant:"h6",children:"Recommendations"}),(0,e.jsx)(M,{label:`${c.length} suggestion${c.length===1?"":"s"}`,color:"primary",size:"small"})]}),c.length===0?(0,e.jsx)(g,{severity:"info",children:"No recommendations available."}):(0,e.jsx)(K,{sx:{p:0},children:c.map((S,y)=>(0,e.jsx)(Qe,{recommendation:S},S.id??`recommendation-${y}`))})]}),u>0&&(0,e.jsx)(g,{severity:"warning",sx:{mt:3},children:(0,e.jsxs)(n,{variant:"body2",children:[(0,e.jsx)("strong",{children:"Warning:"})," Applying this simulation with ",u," unresolved conflict",u===1?"":"s"," may cause operational issues. Consider resolving conflicts first or adjusting the scenario."]})})]})}var ss="wss://api.portlink.com",ns="/socket.io";const ts=()=>{const s=le();(0,ce.useEffect)(()=>{const a=he(ss,{path:ns,transports:["websocket","polling"],autoConnect:!0});return a.on("connect",()=>{console.log("âœ… Simulation WebSocket connected")}),a.on("disconnect",()=>{console.log("âŒ Simulation WebSocket disconnected"),s(Y())}),a.on("connect_error",o=>{console.error("Simulation WebSocket connection error:",o)}),a.on("simulation:started",o=>{console.log("ðŸš€ Simulation started:",o),s(G({status:_.RUNNING,message:`Running simulation "${o.name}"...`}))}),a.on("simulation:completed",o=>{console.log("âœ… Simulation completed:",o),s(G({status:_.COMPLETED,message:`Simulation "${o.name}" completed in ${o.executionTimeMs}ms`})),s(qe(o)),setTimeout(()=>{s(Y())},5e3)}),a.on("simulation:failed",o=>{console.error("âŒ Simulation failed:",o),s(G({status:_.FAILED,message:`Simulation "${o.name}" failed: ${o.error}`})),setTimeout(()=>{s(Y())},1e4)}),()=>{console.log("ðŸ”Œ Disconnecting Simulation WebSocket"),a.disconnect()}},[s])};function ds(){const s=le();ts();const a=A(Oe),o=A(We),x=A(Ve),p=A(Ye),d=A(Ge),m=A(l=>l.simulation.progress),c=A(l=>{const k=l.schedules;if(!k)return null;const{currentSchedule:R,schedules:E=[]}=k;if(R)return R;const z=E.find(L=>L.status==="IN_PROGRESS");if(z)return z;const W=E.find(L=>L.status==="SCHEDULED");return W||(E[0]??null)}),C=[{id:"1",shipName:"MSC Oscar"},{id:"2",shipName:"OOCL Hong Kong"},{id:"3",shipName:"Maersk Essen"}],u=[{id:"1",name:"Berth B-01",type:"BERTH"},{id:"2",name:"Berth B-02",type:"BERTH"},{id:"3",name:"Crane C-01",type:"CRANE"},{id:"4",name:"Crane C-02",type:"CRANE"}],h=async l=>{await s($e(l))},D=async()=>{a&&await s(Fe(a.id))},S=()=>{s(ee())},y=l=>{s(Ue(l))};return(0,e.jsxs)(ye,{maxWidth:"xl",sx:{py:3},children:[(0,e.jsxs)(r,{sx:{mb:4},children:[(0,e.jsx)(n,{variant:"h4",component:"h1",gutterBottom:!0,children:"ðŸ§ª Simulation & What-If Scenarios"}),(0,e.jsx)(n,{variant:"body1",color:"text.secondary",children:"Create and run simulation scenarios to predict impacts and optimize operations"})]}),d&&(0,e.jsx)(g,{severity:"error",sx:{mb:3},onClose:()=>s(ee()),children:d}),m&&(0,e.jsx)(g,{severity:m.status==="failed"?"error":"info",sx:{mb:3},icon:m.status==="running"?(0,e.jsx)(J,{}):void 0,children:(0,e.jsxs)(r,{children:[(0,e.jsx)(n,{variant:"body2",children:m.message}),m.status==="running"&&(0,e.jsx)(Ee,{sx:{mt:1}})]})}),!c&&(0,e.jsx)(g,{severity:"warning",sx:{mb:3},children:"No active schedule found. Please activate a schedule in the Schedules page to run simulations."}),(0,e.jsxs)(v,{container:!0,spacing:3,children:[(0,e.jsxs)(v,{item:!0,xs:12,lg:8,children:[(0,e.jsxs)(N,{sx:{p:3,mb:3},children:[(0,e.jsx)(n,{variant:"h6",gutterBottom:!0,children:"Create New Simulation"}),c?(0,e.jsx)(Ze,{onSubmit:h,loading:x,baseScheduleId:c.id,shipVisits:C,assets:u}):(0,e.jsx)(g,{severity:"info",icon:(0,e.jsx)(J,{}),children:"Please activate a schedule to start creating simulations."})]}),a&&(0,e.jsx)(N,{sx:{p:3},children:(0,e.jsx)(es,{result:a,onApply:D,onDiscard:S,applying:p})})]}),(0,e.jsx)(v,{item:!0,xs:12,lg:4,children:(0,e.jsx)(ie,{children:(0,e.jsxs)(re,{children:[(0,e.jsx)(n,{variant:"h6",gutterBottom:!0,children:"Recent Simulations"}),o.length===0?(0,e.jsx)(n,{variant:"body2",color:"text.secondary",sx:{textAlign:"center",py:3},children:"No simulations yet. Create your first scenario to get started!"}):(0,e.jsx)(K,{sx:{p:0},children:o.map(l=>(0,e.jsx)(Z,{sx:{border:1,borderColor:"divider",borderRadius:1,mb:1},secondaryAction:(0,e.jsxs)(r,{children:[(0,e.jsx)(Q,{size:"small",onClick:()=>console.log("View",l.id),children:(0,e.jsx)(De,{fontSize:"small"})}),(0,e.jsx)(Q,{size:"small",onClick:()=>y(l.id),children:(0,e.jsx)(we,{fontSize:"small"})})]}),children:(0,e.jsx)(X,{primary:l.name,secondary:(0,e.jsxs)(r,{children:[(0,e.jsx)(M,{label:l.scenarioType,size:"small",sx:{mr:1}}),(0,e.jsx)(n,{variant:"caption",color:"text.secondary",children:l.status==="COMPLETED"&&l.completedAt?`Completed ${fe(new Date(l.completedAt),{addSuffix:!0})}`:`Status: ${l.status}`}),(0,e.jsx)("br",{}),(0,e.jsxs)(n,{variant:"caption",color:"text.secondary",children:[l.conflictsDetected," conflicts â€¢ ",l.executionTimeMs,"ms"]})]})})},l.id))})]})})})]})]})}export{ds as default};
